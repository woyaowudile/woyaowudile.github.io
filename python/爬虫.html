<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>çˆ¬è™« | å›åˆ°å¼€å§‹</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/img/logo.ico">
    <link rel="mainifest" href="/maifest.json">
    <meta name="description" content="mtx">
    
    <link rel="preload" href="/assets/css/0.styles.3ec48e31.css" as="style"><link rel="preload" href="/assets/js/app.46d21047.js" as="script"><link rel="preload" href="/assets/js/3.638d6586.js" as="script"><link rel="preload" href="/assets/js/45.479fb256.js" as="script"><link rel="preload" href="/assets/js/1.df9d0f9e.js" as="script"><link rel="prefetch" href="/assets/js/10.a004e073.js"><link rel="prefetch" href="/assets/js/11.3415746f.js"><link rel="prefetch" href="/assets/js/12.283dadf6.js"><link rel="prefetch" href="/assets/js/13.a09206fd.js"><link rel="prefetch" href="/assets/js/14.a5d97aa2.js"><link rel="prefetch" href="/assets/js/15.d203ceed.js"><link rel="prefetch" href="/assets/js/16.152120de.js"><link rel="prefetch" href="/assets/js/17.b61bbc6c.js"><link rel="prefetch" href="/assets/js/18.61c21752.js"><link rel="prefetch" href="/assets/js/19.3d591bfa.js"><link rel="prefetch" href="/assets/js/20.b0e14550.js"><link rel="prefetch" href="/assets/js/21.4719cdfc.js"><link rel="prefetch" href="/assets/js/22.bfa977f3.js"><link rel="prefetch" href="/assets/js/23.81a6ce43.js"><link rel="prefetch" href="/assets/js/24.e18c04ef.js"><link rel="prefetch" href="/assets/js/25.2655b3fe.js"><link rel="prefetch" href="/assets/js/26.403abef7.js"><link rel="prefetch" href="/assets/js/27.80bb55fb.js"><link rel="prefetch" href="/assets/js/28.da3dc54d.js"><link rel="prefetch" href="/assets/js/29.0426b1c0.js"><link rel="prefetch" href="/assets/js/30.6807f167.js"><link rel="prefetch" href="/assets/js/31.2c58a20c.js"><link rel="prefetch" href="/assets/js/32.60866a44.js"><link rel="prefetch" href="/assets/js/33.d045333f.js"><link rel="prefetch" href="/assets/js/34.4264cba3.js"><link rel="prefetch" href="/assets/js/35.1e2af574.js"><link rel="prefetch" href="/assets/js/36.c14863b2.js"><link rel="prefetch" href="/assets/js/37.c42ce76c.js"><link rel="prefetch" href="/assets/js/38.2b15ee49.js"><link rel="prefetch" href="/assets/js/39.c193cf4c.js"><link rel="prefetch" href="/assets/js/4.1f9492e5.js"><link rel="prefetch" href="/assets/js/40.0fa8670b.js"><link rel="prefetch" href="/assets/js/41.18f72d82.js"><link rel="prefetch" href="/assets/js/42.8920546d.js"><link rel="prefetch" href="/assets/js/43.e43cd5f3.js"><link rel="prefetch" href="/assets/js/44.05708dd0.js"><link rel="prefetch" href="/assets/js/46.117cc74e.js"><link rel="prefetch" href="/assets/js/47.cbf3c9ee.js"><link rel="prefetch" href="/assets/js/48.56dfb21a.js"><link rel="prefetch" href="/assets/js/49.1d48b7bd.js"><link rel="prefetch" href="/assets/js/5.002fcee6.js"><link rel="prefetch" href="/assets/js/50.501f642d.js"><link rel="prefetch" href="/assets/js/51.502cad00.js"><link rel="prefetch" href="/assets/js/52.c5b08019.js"><link rel="prefetch" href="/assets/js/53.dc341643.js"><link rel="prefetch" href="/assets/js/54.7ccc2083.js"><link rel="prefetch" href="/assets/js/55.b64b47d9.js"><link rel="prefetch" href="/assets/js/56.a525cc85.js"><link rel="prefetch" href="/assets/js/57.a52897e2.js"><link rel="prefetch" href="/assets/js/58.ba8f3cb2.js"><link rel="prefetch" href="/assets/js/59.b1c5e826.js"><link rel="prefetch" href="/assets/js/6.752a8906.js"><link rel="prefetch" href="/assets/js/60.24baa8a1.js"><link rel="prefetch" href="/assets/js/61.89fcbdb7.js"><link rel="prefetch" href="/assets/js/62.75ba3d50.js"><link rel="prefetch" href="/assets/js/7.eef1ad59.js"><link rel="prefetch" href="/assets/js/8.ac4175e8.js"><link rel="prefetch" href="/assets/js/9.ba4280b0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3ec48e31.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">å›åˆ°å¼€å§‹</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  ä¸»é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å†…å®¹åˆ†ç±»" class="dropdown-title"><span class="title">å†…å®¹åˆ†ç±»</span> <span class="arrow down"></span></button> <button type="button" aria-label="å†…å®¹åˆ†ç±»" class="mobile-dropdown-title"><span class="title">å†…å®¹åˆ†ç±»</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vpn/" class="nav-link">
  vpn
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/web/" class="nav-link">
  web
</a></li><li class="dropdown-item"><!----> <a href="/python/" class="nav-link router-link-active">
  python
</a></li><li class="dropdown-item"><!----> <a href="/npm/" class="nav-link">
  npm
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  ä¸»é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å†…å®¹åˆ†ç±»" class="dropdown-title"><span class="title">å†…å®¹åˆ†ç±»</span> <span class="arrow down"></span></button> <button type="button" aria-label="å†…å®¹åˆ†ç±»" class="mobile-dropdown-title"><span class="title">å†…å®¹åˆ†ç±»</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vpn/" class="nav-link">
  vpn
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/web/" class="nav-link">
  web
</a></li><li class="dropdown-item"><!----> <a href="/python/" class="nav-link router-link-active">
  python
</a></li><li class="dropdown-item"><!----> <a href="/npm/" class="nav-link">
  npm
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/python/" aria-current="page" class="sidebar-link">åŸºç¡€æ±‡æ€»</a></li><li><a href="/python/forã€while.html" class="sidebar-link">å¾ªç¯</a></li><li><a href="/python/importå’Œæ ¼å¼ç¬¦.html" class="sidebar-link">import</a></li><li><a href="/python/æ•°ç»„ã€å­—å…¸.html" class="sidebar-link">æ•°ç»„ä¸å­—å…¸</a></li><li><a href="/python/æ–¹æ³•ä½“.html" class="sidebar-link">æ–¹æ³•</a></li><li><a href="/python/ç±»ä¸ç»§æ‰¿.html" class="sidebar-link">ç±»ä¸ç»§æ‰¿</a></li><li><a href="/python/æ–‡ä»¶è¯»ã€å†™.html" class="sidebar-link">æ–‡ä»¶è¯»ã€å†™</a></li><li><a href="/python/çˆ¬è™«.html" class="active sidebar-link">çˆ¬è™«</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/çˆ¬è™«.html#ä¸€-å®‰è£…åº“" class="sidebar-link">ä¸€.å®‰è£…åº“</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/çˆ¬è™«.html#_1-ä½¿ç”¨" class="sidebar-link">1. ä½¿ç”¨</a></li><li class="sidebar-sub-header"><a href="/python/çˆ¬è™«.html#_2-æŸ¥çœ‹ç½‘ç«™çˆ¬è™«åè®®" class="sidebar-link">2. æŸ¥çœ‹ç½‘ç«™çˆ¬è™«åè®®</a></li></ul></li><li class="sidebar-sub-header"><a href="/python/çˆ¬è™«.html#äºŒ-å¸¸ç”¨å±æ€§" class="sidebar-link">äºŒ. å¸¸ç”¨å±æ€§</a></li><li class="sidebar-sub-header"><a href="/python/çˆ¬è™«.html#ä¸‰-è§£ææ•°æ®" class="sidebar-link">ä¸‰. è§£ææ•°æ®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/çˆ¬è™«.html#_1-bså¯¹è±¡" class="sidebar-link">1. bså¯¹è±¡</a></li><li class="sidebar-sub-header"><a href="/python/çˆ¬è™«.html#_2-æŸ¥æ‰¾å†…å®¹" class="sidebar-link">2. æŸ¥æ‰¾å†…å®¹</a></li><li class="sidebar-sub-header"><a href="/python/çˆ¬è™«.html#_3-tagå¯¹è±¡" class="sidebar-link">3. tagå¯¹è±¡</a></li><li class="sidebar-sub-header"><a href="/python/çˆ¬è™«.html#_4-å®è·µæ“ä½œ" class="sidebar-link">4. å®è·µæ“ä½œ</a></li><li class="sidebar-sub-header"><a href="/python/çˆ¬è™«.html#_5-cookieå’Œsession" class="sidebar-link">5. cookieå’Œsession</a></li></ul></li></ul></li><li><a href="/python/selenium.html" class="sidebar-link">selenium</a></li><li><a href="/python/time.html" class="sidebar-link">å®šæ—¶ä»»åŠ¡</a></li><li><a href="/python/å¤šåç¨‹ã€é˜Ÿåˆ—.html" class="sidebar-link">å¤šåç¨‹ã€é˜Ÿåˆ—</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="çˆ¬è™«"><a href="#çˆ¬è™«" class="header-anchor">#</a> çˆ¬è™«</h1> <h2 id="ä¸€-å®‰è£…åº“"><a href="#ä¸€-å®‰è£…åº“" class="header-anchor">#</a> ä¸€.å®‰è£…åº“</h2> <blockquote><p>pip3 install requests</p> <blockquote><p>æˆ‘çš„ç”µè„‘ä¸Šå®‰è£…äº†python27å’Œ36ï¼Œæ‰€ä»¥pip3å¯¹åº”çš„æ˜¯python3ã€‚å¦‚æœåªæœ‰ä¸€ä¸ªï¼Œå°±pip install requestså³å¯</p></blockquote></blockquote> <h3 id="_1-ä½¿ç”¨"><a href="#_1-ä½¿ç”¨" class="header-anchor">#</a> 1. ä½¿ç”¨</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> requests
res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>

res<span class="token punctuation">.</span>content <span class="token comment"># è·å–åˆ°äºŒè¿›åˆ¶æµ</span>
res<span class="token punctuation">.</span>text <span class="token comment"># è·å–åˆ°å†…å®¹</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_2-æŸ¥çœ‹ç½‘ç«™çˆ¬è™«åè®®"><a href="#_2-æŸ¥çœ‹ç½‘ç«™çˆ¬è™«åè®®" class="header-anchor">#</a> 2. æŸ¥çœ‹ç½‘ç«™çˆ¬è™«åè®®</h3> <blockquote><p>ä¾‹ï¼š'https://www.baidu.com/robots.txt'</p></blockquote> <h2 id="äºŒ-å¸¸ç”¨å±æ€§"><a href="#äºŒ-å¸¸ç”¨å±æ€§" class="header-anchor">#</a> äºŒ. å¸¸ç”¨å±æ€§</h2> <blockquote><p>ä¾‹å¦‚ print(res.status_code) # 200 <br>
res.encoding = 'utf-8
<div class="image-preview"><div heght="100%" class="van-image" style="width:200px;"><img src="/assets/img/requests1.525929ab.png" class="van-image__img" style="object-fit:cover;"><div class="van-image__loading"><i class="van-icon van-icon-photo-o van-image__loading-icon"><!----></i></div></div> <!----></div></p></blockquote> <h2 id="ä¸‰-è§£ææ•°æ®"><a href="#ä¸‰-è§£ææ•°æ®" class="header-anchor">#</a> ä¸‰. è§£ææ•°æ®</h2> <blockquote><ol><li>æ‰‹åŠ¨å®‰è£…</li></ol> <blockquote><p>pip3 install bs4</p></blockquote> <ol start="2"><li>è§£ææ•°æ®ç”¨ï¼Œå³å°†çˆ¬å–çš„å†…å®¹è½¬æ¢æˆbså¯¹è±¡</li></ol></blockquote> <h3 id="_1-bså¯¹è±¡"><a href="#_1-bså¯¹è±¡" class="header-anchor">#</a> 1. bså¯¹è±¡</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> requests
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup

res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://xxxxxxx/index.html'</span><span class="token punctuation">)</span>
html <span class="token operator">=</span> res<span class="token punctuation">.</span>text
<span class="token comment"># ä¸¤ä¸ªå‚æ•°ï¼š ç¬¬ä¸€ä¸ªå¿…é¡»ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼›ç¬¬äºŒä¸ªæ˜¯è§£æå™¨ï¼Œæœ‰å¤šç§å¯é€‰</span>
soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token string">'html.parser'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_2-æŸ¥æ‰¾å†…å®¹"><a href="#_2-æŸ¥æ‰¾å†…å®¹" class="header-anchor">#</a> 2. æŸ¥æ‰¾å†…å®¹</h3> <blockquote><p>æ‰¿æ¥ä¸Šæ–‡</p></blockquote> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token comment"># find fing_all select</span>
soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span> <span class="token comment"># æŸ¥æ‰¾ç¬¬ä¸€ä¸ªdiv 'bs4.element.Tag'</span>
result <span class="token operator">=</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span> <span class="token comment"># æŸ¥æ‰¾å‡ºæ‰€æœ‰çš„div 'bs4.element.ResultSet'</span>

<span class="token comment"># classå’Œç±»å†²çªï¼Œæ‰€æœ‰æ”¹æˆclass_ã€‚</span>
soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'show-list-item'</span><span class="token punctuation">)</span>

<span class="token comment"># find_allè¿”å›çš„ç»“æ„å‡ä¸º []</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> result<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="image-preview"><div heght="100%" class="van-image" style="width:200px;"><img src="/assets/img/find.00bbb071.png" class="van-image__img" style="object-fit:cover;"><div class="van-image__loading"><i class="van-icon van-icon-photo-o van-image__loading-icon"><!----></i></div></div> <!----></div> <h3 id="_3-tagå¯¹è±¡"><a href="#_3-tagå¯¹è±¡" class="header-anchor">#</a> 3. tagå¯¹è±¡</h3> <blockquote><p>findæŸ¥æ‰¾çš„ç»“æœæ˜¯tagå¯¹è±¡
result.find(class_='xxxx') # None, å› ä¸ºdivä¸‹é¢æ²¡æœ‰tagäº†ã€‚åªæœ‰textå†…å®¹</p> <blockquote><p>å³result: &lt;div class='xxxx'&gt; 123456 &lt;/div&gt;
result.text # 123456 <br></p></blockquote></blockquote> <blockquote><p>åˆæ¯”å¦‚ aï¼š &lt;a href='https://xxxxxx'&gt;&lt;/a&gt;</p> <blockquote><p>a['href] # https://xxxxxx</p></blockquote></blockquote> <div class="image-preview"><div heght="100%" class="van-image" style="width:200px;"><img src="/assets/img/tag.b18d7b76.png" class="van-image__img" style="object-fit:cover;"><div class="van-image__loading"><i class="van-icon van-icon-photo-o van-image__loading-icon"><!----></i></div></div> <!----></div> <h3 id="_4-å®è·µæ“ä½œ"><a href="#_4-å®è·µæ“ä½œ" class="header-anchor">#</a> 4. å®è·µæ“ä½œ</h3> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token comment"># å¤©æ°”é¢„æŠ¥ï¼š 7æ—¥</span>
<span class="token keyword">def</span> <span class="token function">get_weather</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">:</span>
    url <span class="token operator">=</span> <span class="token string">'http://www.weather.com.cn/weather/'</span><span class="token operator">+</span> code <span class="token operator">+</span><span class="token string">'.shtml'</span>
    headers <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.107 Safari/537.36'</span>
    <span class="token punctuation">}</span>
    
    res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
    res<span class="token punctuation">.</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span>
    html <span class="token operator">=</span> res<span class="token punctuation">.</span>text
    soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token string">'html.parser'</span><span class="token punctuation">)</span>

    
    title <span class="token operator">=</span> soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'ctop'</span><span class="token punctuation">)</span>
    box <span class="token operator">=</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'skyid'</span><span class="token punctuation">)</span>
    <span class="token builtin">str</span> <span class="token operator">=</span> title<span class="token punctuation">.</span>text<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n'</span>
    <span class="token builtin">str</span> <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">':\n'</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> box<span class="token punctuation">:</span>
        <span class="token builtin">str</span> <span class="token operator">=</span> <span class="token builtin">str</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span>text<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token builtin">str</span>
    <span class="token comment"># print(str)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token comment"># è±†ç“£ç”µå½±æ’åï¼š åç§° + è¯„åˆ†</span>
<span class="token keyword">import</span> requests
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup

<span class="token keyword">def</span> <span class="token function">get_movie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    headers<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'user-agent'</span><span class="token punctuation">:</span><span class="token string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.79 Safari/537.36'</span><span class="token punctuation">}</span>
    res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://movie.douban.com/chart'</span><span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
    <span class="token comment"># å¦‚æœçˆ¬å–çš„å†…å®¹ä¹±ç ï¼Œå¯ä»¥è®¾ç½®å¯¹åº”çš„ç¼–ç æ–¹å¼</span>
    <span class="token comment"># res.encoding='utf-8'</span>

    html <span class="token operator">=</span> res<span class="token punctuation">.</span>text

    soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token string">'html.parser'</span><span class="token punctuation">)</span>
    cont <span class="token operator">=</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'pl2'</span><span class="token punctuation">)</span>
    <span class="token builtin">str</span> <span class="token operator">=</span> <span class="token string">'æœ€æ–°ç”µå½±ï¼š\n'</span>
    <span class="token keyword">for</span> item <span class="token keyword">in</span> cont<span class="token punctuation">:</span>
        name <span class="token operator">=</span> item<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'clearfix'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
        a <span class="token operator">=</span> item<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
        <span class="token builtin">str</span> <span class="token operator">=</span> <span class="token builtin">str</span> <span class="token operator">+</span> a <span class="token operator">+</span> <span class="token string">' : '</span> <span class="token operator">+</span> name
        <span class="token comment"># print(a + ' : ' + name)</span>
    
    <span class="token keyword">return</span> <span class="token builtin">str</span>

<span class="token comment"># æ‰“å°æ•ˆæœå¦‚ä¸‹ ğŸ‘‡</span>
<span class="token comment"># é»‘å¯¡å¦‡/TheBlackWidow : 6.4(86959äººè¯„ä»·)</span>
<span class="token comment"># æ˜æ—¥ä¹‹æˆ˜/å¹½çµå¾å‹Ÿ/å¹½çµåˆ†é£é˜Ÿ : 6.5(33369äººè¯„ä»·)</span>
<span class="token comment"># æ™ºé½¿/Limbo : 7.3(9478äººè¯„ä»·)</span>
<span class="token comment"># æ€æ‰‹å¦»å­çš„ä¿é•–/ä¿é•³æ•‘æ€æ‰‹2(æ¸¯)/ç‹ç‰Œä¿é•–2 : 6.3(10393äººè¯„ä»·)</span>
<span class="token comment"># æˆ‘è¦æˆ‘ä»¬åœ¨ä¸€èµ·/10å¹´å¥³å‹/åå¹´å¥³å‹ : 6.1(72364äººè¯„ä»·)</span>
<span class="token comment"># é˜³å…‰å§å¦¹æ·˜/ä¸­å›½ç‰ˆé˜³å…‰å§å¦¹æ·˜/SunnySisters : 4.5(32014äººè¯„ä»·)</span>
<span class="token comment"># å…­äºº-æ³°å¦å°¼å…‹ä¸Šçš„ä¸­å›½å¹¸å­˜è€…/å…­äºº/å…­äººï¼šæ³°å¦å°¼å…‹å·ä¸Šçš„ä¸­å›½å¹¸å­˜è€… : 8.3(16500äººè¯„ä»·)</span>
<span class="token comment"># å®è´è€æ¿2/å®è´è€æ¿2ï¼šå®¶æ—ä¼ä¸š/å®è´è€æ¿ï¼šå®¶å¤§ä¸šå¤§(å°) : 6.6(3867äººè¯„ä»·)</span>
<span class="token comment"># æ€ªå¥‡å®…/æ¡é­‚é‚¨(æ¸¯)/æ€ªå¥‡å…¬å¯“ : 6.9(7206äººè¯„ä»·)</span>
<span class="token comment"># å¤æ—¥å‹æ™´å¤©/ç››å¤å‹æ™´å¤©(æ¸¯)/è·¯å¡çš„å¤å¤©(å°) : 7.3(19038äººè¯„ä»·)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token comment"># æ³¨æ„æ–‡ä»¶çš„åç§°(json1.py)ä¸èƒ½å’Œæ¨¡å—çš„åç§°ä¸€æ · &lt;br /&gt;</span>
<span class="token keyword">import</span> json
<span class="token comment"># str -&gt; json</span>
json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token comment"># json -&gt; str</span>
json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div> <h3 id="_5-cookieå’Œsession"><a href="#_5-cookieå’Œsession" class="header-anchor">#</a> 5. cookieå’Œsession</h3> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token comment"># cookieå…ç™»é€»è¾‘</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> json

url <span class="token operator">=</span> <span class="token string">'https://xiaoke.kaikeba.com/example/wordpress/wp-login.php'</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'User-Agent'</span><span class="token punctuation">:</span><span class="token string">'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.120 Safari/537.36'</span>
<span class="token punctuation">}</span>
<span class="token comment"># é™¤äº†logã€pwdå…¶ä»–éƒ½æ˜¯é»˜è®¤å‚æ•°</span>
data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'log'</span><span class="token punctuation">:</span> <span class="token string">'kaikeba'</span><span class="token punctuation">,</span>
    <span class="token string">'pwd'</span><span class="token punctuation">:</span> <span class="token string">'kaikeba888'</span><span class="token punctuation">,</span>
    <span class="token string">'wp-submit'</span><span class="token punctuation">:</span> <span class="token string">'ç™»å½•'</span><span class="token punctuation">,</span>
    <span class="token string">'redirect_to'</span><span class="token punctuation">:</span> <span class="token string">'https://xiaoke.kaikeba.com/example/wordpress/2019/10/17/%e5%bc%80%e8%af%be%e5%90%a7%e6%97%a0%e6%95%8c%e5%a5%bd%e5%90%83%e7%9a%84%e9%a3%9f%e5%a0%82%e4%b8%80%e5%91%a8%e8%8f%9c%e8%b0%b1/'</span><span class="token punctuation">,</span>
    <span class="token string">'testcookie'</span><span class="token punctuation">:</span> <span class="token string">'1'</span>
<span class="token punctuation">}</span>

session <span class="token operator">=</span> requests<span class="token punctuation">.</span>session<span class="token punctuation">(</span><span class="token punctuation">)</span>
session<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">)</span>

<span class="token comment"># å°†ç”Ÿæˆçš„cookieè½¬æ¢æˆ å­—å…¸</span>
cookie_dict <span class="token operator">=</span> requests<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>dict_from_cookiejar<span class="token punctuation">(</span>session<span class="token punctuation">.</span>cookies<span class="token punctuation">)</span>
<span class="token comment"># å°†å­—å…¸è½¬æ¢æˆ å­—ç¬¦ä¸²</span>
cookie_str <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>cookie_dict<span class="token punctuation">)</span>

<span class="token comment"># å°†cookieå†™å…¥æ–‡ä»¶å­˜èµ·æ¥</span>
f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'cookie.txt'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>
f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>cookie_str<span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token comment"># è¯»å–å¹¶ä½¿ç”¨</span>
cookie_txt <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'cookie.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span>
cookie_dict <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>cookie_txt_read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
cookie <span class="token operator">=</span> requests<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>cookiejar_form_dict<span class="token punctuation">(</span>cookie_dict<span class="token punctuation">)</span>
session<span class="token punctuation">.</span>cookies <span class="token operator">=</span> cookie
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token comment"># tryæˆåŠŸå°±ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼›å¦åˆ™æŠ¥é”™FileNotFoundErrorï¼Œèµ°except</span>
<span class="token keyword">try</span><span class="token punctuation">:</span> 
    xxxxxxxxx
<span class="token keyword">except</span> FileNotFoundError<span class="token punctuation">:</span> 
    xxxxxxxxx

<span class="token comment"># to do sometings</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æ›´æ–°æ—¶é—´:</span> <span class="time">8/4/2021, 6:12:44 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/python/æ–‡ä»¶è¯»ã€å†™.html" class="prev">
        æ–‡ä»¶è¯»ã€å†™
      </a></span> <span class="next"><a href="/python/selenium.html">
        selenium
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.46d21047.js" defer></script><script src="/assets/js/3.638d6586.js" defer></script><script src="/assets/js/45.479fb256.js" defer></script><script src="/assets/js/1.df9d0f9e.js" defer></script>
  </body>
</html>
